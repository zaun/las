(function(e){function t(t){for(var n,s,r=t[0],c=t[1],l=t[2],u=0,d=[];u<r.length;u++)s=r[u],i[s]&&d.push(i[s][0]),i[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);m&&m(t);while(d.length)d.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],n=!0,s=1;s<a.length;s++){var r=a[s];0!==i[r]&&(n=!1)}n&&(o.splice(t--,1),e=c(c.s=a[0]))}return e}var n={},s={app:0},i={app:0},o=[];function r(e){return c.p+"js/"+({"document~template":"document~template",document:"document",template:"template",search:"search"}[e]||e)+"."+{"document~template":"95d9f33d",document:"9ee6241c",template:"1d1986e5",search:"95b2ecc8"}[e]+".js"}function c(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.e=function(e){var t=[],a={"document~template":1,document:1,template:1};s[e]?t.push(s[e]):0!==s[e]&&a[e]&&t.push(s[e]=new Promise(function(t,a){for(var n="css/"+({"document~template":"document~template",document:"document",template:"template",search:"search"}[e]||e)+"."+{"document~template":"4f17bf5c",document:"4b7e9c26",template:"41656a53",search:"31d6cfe0"}[e]+".css",i=c.p+n,o=document.getElementsByTagName("link"),r=0;r<o.length;r++){var l=o[r],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===n||u===i))return t()}var d=document.getElementsByTagName("style");for(r=0;r<d.length;r++){l=d[r],u=l.getAttribute("data-href");if(u===n||u===i)return t()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=t,m.onerror=function(t){var n=t&&t.target&&t.target.src||i,o=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");o.request=n,delete s[e],m.parentNode.removeChild(m),a(o)},m.href=i;var f=document.getElementsByTagName("head")[0];f.appendChild(m)}).then(function(){s[e]=0}));var n=i[e];if(0!==n)if(n)t.push(n[2]);else{var o=new Promise(function(t,a){n=i[e]=[t,a]});t.push(n[2]=o);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=r(e),l=function(t){u.onerror=u.onload=null,clearTimeout(d);var a=i[e];if(0!==a){if(a){var n=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src,o=new Error("Loading chunk "+e+" failed.\n("+n+": "+s+")");o.type=n,o.request=s,a[1](o)}i[e]=void 0}};var d=setTimeout(function(){l({type:"timeout",target:u})},12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(t)},c.m=e,c.c=n,c.d=function(e,t,a){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(a,n,function(t){return e[t]}.bind(null,n));return a},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var m=u;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("cd49")},4678:function(e,t,a){var n={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb718","./de-ch.js":"bb718","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function s(e){var t=i(e);return a(t)}function i(e){var t=n[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return t}s.keys=function(){return Object.keys(n)},s.resolve=i,e.exports=s,s.id="4678"},"5c0b":function(e,t,a){"use strict";var n=a("6879"),s=a.n(n);s.a},6879:function(e,t,a){},"69e5":function(e,t,a){},"9a0f":function(e,t,a){},a44e:function(e,t,a){"use strict";var n=a("69e5"),s=a.n(n);s.a},a73a:function(e,t,a){"use strict";var n=a("9a0f"),s=a.n(n);s.a},cd49:function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("097d");var n,s=a("2b0e"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("Header",{on:{"do-search":e.doSearch,"show-login":function(t){e.showAuthDialog=!0},"show-dirty":function(t){e.showDirtyDialog=!0},"show-document":function(t){e.showNewDocument=!0},"show-template":function(t){e.showNewTemplate=!0},"show-upload-media":function(t){e.showUploadMediaDialog=!0}}}),a("AuthDialog",{model:{value:e.showAuthDialog,callback:function(t){e.showAuthDialog=t},expression:"showAuthDialog"}}),a("DirtyDialog",{model:{value:e.showDirtyDialog,callback:function(t){e.showDirtyDialog=t},expression:"showDirtyDialog"}}),a("NewDocument",{model:{value:e.showNewDocument,callback:function(t){e.showNewDocument=t},expression:"showNewDocument"}}),a("NewTemplate",{model:{value:e.showNewTemplate,callback:function(t){e.showNewTemplate=t},expression:"showNewTemplate"}}),a("UploadMedia",{model:{value:e.showUploadMediaDialog,callback:function(t){e.showUploadMediaDialog=t},expression:"showUploadMediaDialog"}}),a("v-container",{staticClass:"my-3"},[a("router-view")],1),a("Footer")],1)},o=[],r=a("d225"),c=a("b0b4"),l=a("308d"),u=a("6bb5"),d=a("4e2b"),m=a("9ab4"),f=a("60a3"),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{persistent:"",width:"350"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},["login"===e.mode?a("div",[a("v-tabs",{attrs:{"fixed-tabs":"",centered:"",color:e.tabColor,"slider-color":e.sliderColor},on:{change:e.doChangeTabs},model:{value:e.dialogTab,callback:function(t){e.dialogTab=t},expression:"dialogTab"}},[a("v-tab",{attrs:{disabled:e.networkBusy}},[e._v("Sign in")]),a("v-tab",{attrs:{disabled:e.networkBusy}},[e._v("Register")])],1),a("v-tabs-items",{model:{value:e.dialogTab,callback:function(t){e.dialogTab=t},expression:"dialogTab"}},[a("v-tab-item",[a("v-card",[a("v-alert",{staticClass:"banner",attrs:{type:"error",value:e.showSignInError,transition:"scale-transition",dismissible:""}},[e._v(e._s(e.signInError))]),a("v-form",{ref:"signInForm",model:{value:e.signInValid,callback:function(t){e.signInValid=t},expression:"signInValid"}},[a("v-card-text",[a("v-text-field",{attrs:{label:"Email Address",required:"","append-icon":"fa-envelope",disabled:e.networkBusy,rules:e.rules.email},model:{value:e.signInEmail,callback:function(t){e.signInEmail=t},expression:"signInEmail"}}),a("v-text-field",{attrs:{label:"Password",required:"","append-icon":e.showSignInPassword?"fa-eye-slash":"fa-eye",type:e.showSignInPassword?"text":"password",disabled:e.networkBusy,rules:e.rules.password},on:{"click:append":function(t){e.showSignInPassword=!e.showSignInPassword}},model:{value:e.signInPassword,callback:function(t){e.signInPassword=t},expression:"signInPassword"}}),a("v-card-actions",[a("v-btn",{attrs:{block:"",color:e.buttonColor,disabled:!e.signInValid||e.networkBusy},on:{click:e.doSignIn}},[e.networkBusy?a("v-progress-circular",{attrs:{indeterminate:"",size:15,width:2}}):e._e(),e._v("Sign In")],1)],1),a("v-card-actions",[a("v-btn",{attrs:{block:"",disabled:e.networkBusy},on:{click:e.closeDialog}},[e._v("Cancel")])],1),a("v-card-actions",[a("v-btn",{staticClass:"caption font-weight-light",attrs:{block:"",flat:"",small:"",ripple:!1,disabled:e.networkBusy},on:{click:function(t){e.showChangePassword=!0}}},[e._v("Forgot Password")]),a("v-btn",{staticClass:"caption font-weight-light",attrs:{block:"",flat:"",small:"",ripple:!1,disabled:e.networkBusy},on:{click:e.gotoConfirm}},[e._v("Confirm Account")])],1)],1)],1)],1)],1),a("v-tab-item",[a("v-card",[a("v-alert",{staticClass:"banner",attrs:{type:"error",value:e.showRegisterError,transition:"scale-transition",dismissible:""}},[e._v(e._s(e.registerError))]),a("v-form",{ref:"registerForm",model:{value:e.registerValid,callback:function(t){e.registerValid=t},expression:"registerValid"}},[a("v-card-text",[a("v-text-field",{attrs:{label:"Email Address",required:"","append-icon":"fa-envelope",disabled:e.networkBusy,rules:e.rules.email},model:{value:e.regEmail,callback:function(t){e.regEmail=t},expression:"regEmail"}}),a("v-text-field",{ref:"regPassword",attrs:{label:"Password",required:"",type:"password",disabled:e.networkBusy,rules:e.rules.newPassword},model:{value:e.regPassword,callback:function(t){e.regPassword=t},expression:"regPassword"}}),a("v-text-field",{attrs:{label:"Confirm Password",required:"",type:"password",disabled:e.networkBusy,rules:e.rules.confirmPassword},model:{value:e.regConfirmPassword,callback:function(t){e.regConfirmPassword=t},expression:"regConfirmPassword"}}),e.showBirthdate?a("v-menu",{ref:"birthdateMenu",attrs:{"close-on-content-click":!1,disabled:e.networkBusy,"return-value":e.regBirthdate,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},on:{"update:returnValue":function(t){e.regBirthdate=t},"update:return-value":function(t){e.regBirthdate=t}},model:{value:e.showBirthdatePopup,callback:function(t){e.showBirthdatePopup=t},expression:"showBirthdatePopup"}},[a("v-text-field",{attrs:{slot:"activator",disabled:e.networkBusy,label:"Birthday","append-icon":"fa-calendar",rules:e.rules.birthdateRules,readonly:""},slot:"activator",model:{value:e.regBirthdateFormatted,callback:function(t){e.regBirthdateFormatted=t},expression:"regBirthdateFormatted"}}),a("v-date-picker",{ref:"birthdatePicker",attrs:{color:"teal lighten-2",disabled:e.networkBusy,max:(new Date).toISOString().substr(0,10)},on:{input:function(t){return e.$refs.birthdateMenu.save(e.regBirthdate)}},model:{value:e.regBirthdate,callback:function(t){e.regBirthdate=t},expression:"regBirthdate"}})],1):e._e(),a("v-card-actions",[a("v-btn",{attrs:{block:"",color:e.buttonColor,disabled:!e.registerValid||e.networkBusy},on:{click:e.doRegister}},[e.networkBusy?a("v-progress-circular",{attrs:{indeterminate:"",size:15,width:2}}):e._e(),e._v("Register")],1)],1),a("v-card-actions",[a("v-btn",{attrs:{block:"",disabled:e.networkBusy},on:{click:e.closeDialog}},[e._v("Cancel")])],1)],1)],1)],1)],1)],1)],1):e._e(),"confirm"==e.mode?a("div",[a("v-card",[a("v-form",{ref:"confirmForm",model:{value:e.confirmValid,callback:function(t){e.confirmValid=t},expression:"confirmValid"}},[a("v-toolbar",{attrs:{color:e.tabColor,dense:""}},[a("v-spacer"),a("v-toolbar-title",{staticClass:"body-2"},[e._v("CONFIRM ACCOUNT")]),a("v-spacer")],1),a("v-alert",{staticClass:"banner",attrs:{type:"error",value:e.showConfirmError,transition:"scale-transition",dismissible:""}},[e._v(e._s(e.confirmError))]),a("v-card-text",[a("v-text-field",{attrs:{label:"Email Address",required:"","append-icon":"fa-envelope",disabled:e.networkBusy,rules:e.rules.email},model:{value:e.confirmEmail,callback:function(t){e.confirmEmail=t},expression:"confirmEmail"}}),a("v-text-field",{attrs:{label:"Code",required:"",disabled:e.networkBusy,rules:e.rules.required},model:{value:e.confirmCode,callback:function(t){e.confirmCode=t},expression:"confirmCode"}}),a("v-card-actions",[a("v-btn",{attrs:{block:"",color:e.buttonColor,disabled:!e.confirmValid||e.networkBusy},on:{click:e.doConfirm}},[e.networkBusy?a("v-progress-circular",{attrs:{indeterminate:"",size:15,width:2}}):e._e(),e._v("Confirm")],1)],1),a("v-card-actions",[a("v-btn",{attrs:{block:"",disabled:e.networkBusy},on:{click:e.closeDialog}},[e._v("Cancel")])],1)],1)],1)],1)],1):e._e()])},h=[];(function(e){e["LOGIN"]="login",e["REGISTER"]="register",e["CONFIRM"]="confirm",e["FORGOT"]="edit"})(n||(n={}));var v=function(e){function t(){var e;return Object(r["a"])(this,t),e=Object(l["a"])(this,Object(u["a"])(t).apply(this,arguments)),e.rules={email:[function(e){return!!e||"An e-mail is required to continue."},function(e){return/.+@.+/.test(e)||"Must be a valid e-mail address."}],password:[function(e){return!!e||"A password is required to continue.."}],newPassword:[function(e){return!!e||"A password is required to continue."},function(e){return e&&e.length>=8||"Must be at least 8 characters."}],confirmPassword:[function(e){return!!e||"Confirm password to continue"},function(t){return t===e.$refs.regPassword.value||"Passwords must match to continue."}],birthdateRules:[function(e){return!!e||"A birth date is required to continue."}]},e.mode=n.LOGIN,e.dialogTab=0,e.networkBusy=!1,e.signInValid=!1,e.registerValid=!1,e.confirmValid=!1,e.forgotValid=!1,e.changeValid=!1,e.showSignInError=!1,e.showSignInPassword=!1,e.signInError="",e.signInEmail="",e.signInPassword="",e.showRegisterError=!1,e.showBirthdatePopup=!1,e.registerError="",e.regName="",e.regEmail="",e.regPassword="",e.regConfirmPassword="",e.regBirthdateFormatted="",e.regBirthdate="",e.showChangePassword=!1,e.showConfirmError=!1,e.confirmError="",e.confirmEmail="",e.confirmCode="",e.forgotEmail="",e.changePassword="",e.changeConfirmPassword="",e.changeCode="",e}return Object(d["a"])(t,e),Object(c["a"])(t,[{key:"clearForms",value:function(){this.showSignInError=!1,this.showConfirmError=!1,this.showRegisterError=!1,this.$refs.signInForm&&this.$refs.signInForm.reset(),this.$refs.registerForm&&this.$refs.registerForm.reset(),this.$refs.confirmForm&&this.$refs.confirmForm.reset()}},{key:"closeDialog",value:function(){this.$emit("input",!1),this.clearForms(),this.mode=n.LOGIN,this.dialogTab=0}},{key:"doChangeTabs",value:function(){this.clearForms()}},{key:"doRegister",value:function(){var e=this;this.networkBusy=!0,this.showRegisterError=!1,this.$store.dispatch("cognito/registerUser",{username:this.regEmail,password:this.regPassword,attributes:{email:this.regEmail}}).then(function(t){e.networkBusy=!1,e.confirmEmail=e.regEmail,e.mode=n.CONFIRM,e.dialogTab=0}).catch(function(t){e.registerError="Could not create user account, please try again later.","UsernameExistsException"===t.code&&(e.registerError="A user with that email already exists."),e.showRegisterError=!0,e.networkBusy=!1})}},{key:"doSignIn",value:function(){var e=this;this.networkBusy=!0,this.showSignInError=!1,this.$store.dispatch("cognito/signInUser",{username:this.signInEmail,password:this.signInPassword}).then(function(t){e.networkBusy=!1,e.closeDialog()}).catch(function(t){t&&"NotAuthorizedException"===t.code?e.signInError="Invalid account or password.":t&&"UserNotFoundException"===t.code?e.signInError="Invalid account or password.":e.signInError=t.message||t,e.showSignInError=!0,e.networkBusy=!1})}},{key:"doConfirm",value:function(){var e=this;this.networkBusy=!0,this.$store.dispatch("cognito/confirmUser",{username:this.confirmEmail,code:this.confirmCode}).then(function(t){e.networkBusy=!1,e.$store.getters["cognito/isLoggedIn"]?e.closeDialog():(e.clearForms(),e.mode=n.LOGIN,e.dialogTab=0)}).catch(function(t){t&&"UserNotFoundException"===t.code?e.confirmError="Invalid account or code.":t&&"NotAuthorizedException"===t.code?e.confirmError="Account already confirmed.":t&&"CodeMismatchException"===t.code?e.confirmError="Confirmation code is invalid.":e.confirmError=t.message||t,console.log(t),e.showConfirmError=!0,e.networkBusy=!1})}},{key:"gotoConfirm",value:function(){this.mode=n.CONFIRM,this.dialogTab=0}},{key:"showBirthdate",get:function(){return!!this.minAge}}]),t}(f["c"]);m["a"]([Object(f["b"])({default:!1})],v.prototype,"value",void 0),m["a"]([Object(f["b"])({default:""})],v.prototype,"tabColor",void 0),m["a"]([Object(f["b"])({default:""})],v.prototype,"sliderColor",void 0),m["a"]([Object(f["b"])({default:""})],v.prototype,"buttonColor",void 0),m["a"]([Object(f["b"])({default:0})],v.prototype,"minAge",void 0),v=m["a"]([f["a"]],v);var b=v,g=b,w=(a("a44e"),a("2877")),y=a("6544"),j=a.n(y),k=a("0798"),C=a("8336"),x=a("b0af"),T=a("99d9"),E=a("2e4b"),D=a("169a"),_=a("4bd4"),O=a("e449"),V=a("490a"),I=a("9910"),$=a("71a3"),B=a("c671"),P=a("fe57"),A=a("aac8"),S=a("2677"),M=a("71d9"),N=a("2a7f"),F=Object(w["a"])(g,p,h,!1,null,"47abc226",null),U=F.exports;j()(F,{VAlert:k["a"],VBtn:C["a"],VCard:x["a"],VCardActions:T["a"],VCardText:T["b"],VDatePicker:E["a"],VDialog:D["a"],VForm:_["a"],VMenu:O["a"],VProgressCircular:V["a"],VSpacer:I["a"],VTab:$["a"],VTabItem:B["a"],VTabs:P["a"],VTabsItems:A["a"],VTextField:S["a"],VToolbar:M["a"],VToolbarTitle:N["a"]});var z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{persistent:"",width:"450"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[a("v-card",[a("v-card-title",{staticClass:"title"},[e._v(e._s(e.title))]),a("v-card-text",{staticClass:"body-1"},[e._v("There are unsaved changes. Closing the document without savingwill cause all changes to be lost. Do you wish to continue without saving?")]),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{on:{click:e.doNo}},[e._v("NO")]),a("v-btn",{on:{click:e.doYes}},[e._v("YES")])],1)],1)],1)},L=[],R=(a("7f7f"),function(e){function t(){return Object(r["a"])(this,t),Object(l["a"])(this,Object(u["a"])(t).apply(this,arguments))}return Object(d["a"])(t,e),Object(c["a"])(t,[{key:"doNo",value:function(){this.$emit("input",!1)}},{key:"doYes",value:function(){var e=this;this.$store.dispatch("session/cancelEdit").then(function(){e.$emit("input",!1)})}},{key:"isDocumentPage",get:function(){return"document"===this.$store.state.route.name}},{key:"isTemplatePage",get:function(){return"template"===this.$store.state.route.name}},{key:"title",get:function(){return this.isDocumentPage?"Close document without saving?":this.isTemplatePage?"Close template without saving?":void 0}}]),t}(f["c"]));m["a"]([Object(f["b"])({default:""})],R.prototype,"value",void 0),R=m["a"]([f["a"]],R);var q=R,Y=q,G=a("12b2"),H=a("ce7e"),W=Object(w["a"])(Y,z,L,!1,null,"91037038",null),J=W.exports;j()(W,{VBtn:C["a"],VCard:x["a"],VCardActions:T["a"],VCardText:T["b"],VCardTitle:G["a"],VDialog:D["a"],VDivider:H["a"],VSpacer:I["a"]});var Q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isDocumentPage?a("v-footer",{staticClass:"no-print",attrs:{app:""}},[a("v-layout",{staticClass:"caption px-3 py-1"},[a("v-flex",{staticClass:"hidden-xs-only",attrs:{sm3:""}},[a("span",[e._v("Library Access System")])]),a("v-flex",{staticClass:"text-xs-center",attrs:{xs12:"",sm6:""}},[a("span",{staticClass:"hidden-md-and-down"},[e._v("This work is licensed under a Creative Commons Attribution-ShareAlike 4.0 International License.")]),a("span",{staticClass:"hidden-lg-and-up"},[e._v("Creative Commons Attribution-ShareAlike 4.0")])]),a("v-flex",{staticClass:"hidden-xs-only text-xs-right",attrs:{xs3:"",sm3:""}},[a("span",{staticClass:"hidden-xs-only"},[e._v(e._s(e.documentCreatedAt)+" ~ "+e._s(e.documentUpdatedAt))]),a("span",{staticClass:"hidden-sm-and-up"},[e._v(e._s(e.documentUpdatedAt))])])],1)],1):e.isTemplatePage?a("v-footer",{staticClass:"no-print",attrs:{app:""}},[a("v-layout",{staticClass:"caption px-3 py-1"},[a("v-flex",{staticClass:"hidden-xs-only",attrs:{sm3:""}},[a("span",[e._v("Library Access System")])]),a("v-flex",{staticClass:"text-xs-center",attrs:{xs12:"",sm6:""}},[a("span",{staticClass:"hidden-md-and-down"},[e._v("This work is licensed under a Creative Commons Attribution-ShareAlike 4.0 International License.")]),a("span",{staticClass:"hidden-lg-and-up"},[e._v("Creative Commons Attribution-ShareAlike 4.0")])]),a("v-flex",{staticClass:"hidden-xs-only text-xs-right",attrs:{xs3:"",sm3:""}},[a("span",{staticClass:"hidden-xs-only"},[e._v(e._s(e.templateCreatedAt)+" ~ "+e._s(e.templateUpdatedAt))]),a("span",{staticClass:"hidden-sm-and-up"},[e._v(e._s(e.templateUpdatedAt))])])],1)],1):e._e()},Z=[],K=a("c1df"),X=a.n(K),ee=function(e){function t(){return Object(r["a"])(this,t),Object(l["a"])(this,Object(u["a"])(t).apply(this,arguments))}return Object(d["a"])(t,e),Object(c["a"])(t,[{key:"isDocumentPage",get:function(){return"document"===this.$store.state.route.name}},{key:"isTemplatePage",get:function(){return"template"===this.$store.state.route.name}},{key:"documentCreatedAt",get:function(){return this.$store.state.session.document?X()(this.$store.state.session.document.createdAt).format("YYYY-MM-DD"):""}},{key:"documentUpdatedAt",get:function(){return this.$store.state.session.document?X()(this.$store.state.session.document.updatedAt).format("YYYY-MM-DD"):""}},{key:"templateCreatedAt",get:function(){return this.$store.state.session.template?X()(this.$store.state.session.template.createdAt).format("YYYY-MM-DD"):""}},{key:"templateUpdatedAt",get:function(){return this.$store.state.session.template?X()(this.$store.state.session.template.updatedAt).format("YYYY-MM-DD"):""}}]),t}(f["c"]);ee=m["a"]([f["a"]],ee);var te=ee,ae=te,ne=(a("a73a"),a("0e8f")),se=a("553a"),ie=a("a722"),oe=Object(w["a"])(ae,Q,Z,!1,null,"1fec24d2",null),re=oe.exports;j()(oe,{VFlex:ne["a"],VFooter:se["a"],VLayout:ie["a"]});var ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-toolbar",{staticClass:"no-print",attrs:{dense:"",app:""}},[a("v-toolbar-title",[e._v("L.A.S.")]),a("v-spacer"),e.isSearchPage||e.isEditMode?e._e():a("v-text-field",{attrs:{"append-icon":"mdi-magnify"},on:{change:e.doSearch},model:{value:e.searchTerm,callback:function(t){e.searchTerm=t},expression:"searchTerm"}}),a("v-spacer"),e.isAuthed?e._e():a("v-btn",{attrs:{flat:""},on:{click:e.showLogin}},[e._v("Sign In / Register")]),e.isAuthed?a("v-menu",{attrs:{"offset-y":"",bottom:"",left:""}},[a("v-toolbar-title",{attrs:{slot:"activator"},slot:"activator"},[a("v-icon",[e._v("mdi-face")])],1),a("v-list",[a("v-list-tile",[a("v-list-tile-title",[e._v("Username")])],1),a("v-divider"),e.isEditMode?e._e():a("div",[a("v-list-tile",{on:{click:e.showNewDocument}},[a("v-list-tile-avatar",[a("v-icon",[e._v("mdi-file-plus")])],1),a("v-list-tile-title",[e._v("New Document")])],1),a("v-list-tile",{on:{click:e.showNewTemplate}},[a("v-list-tile-avatar",[a("v-icon",[e._v("mdi-book-plus")])],1),a("v-list-tile-title",[e._v("New Template")])],1),a("v-list-tile",{attrs:{disabled:""},on:{click:e.showUploadMedia}},[a("v-list-tile-avatar",[a("v-icon",[e._v("mdi-cloud-upload-outline")])],1),a("v-list-tile-title",[e._v("Upload Media")])],1),a("v-divider"),e.isDocumentPage?a("div",[a("v-list-tile",{on:{click:e.setEditMode}},[a("v-list-tile-avatar",[a("v-icon",[e._v("mdi-pencil")])],1),a("v-list-tile-title",[e._v("Edit Document")])],1),a("v-list-tile",{attrs:{disabled:""}},[a("v-list-tile-avatar",[a("v-icon",[e._v("mdi-history")])],1),a("v-list-tile-title",[e._v("History")])],1),a("v-list-tile",{on:{click:e.gotoTemplate}},[a("v-list-tile-avatar",[a("v-icon",[e._v("mdi-book")])],1),a("v-list-tile-title",[e._v("Goto Template")])],1)],1):e._e(),e.isTemplatePage?a("div",[a("v-list-tile",{on:{click:e.setEditMode}},[a("v-list-tile-avatar",[a("v-icon",[e._v("mdi-pencil")])],1),a("v-list-tile-title",[e._v("Edit Template")])],1),a("v-list-tile",{attrs:{disabled:""}},[a("v-list-tile-avatar",[a("v-icon",[e._v("mdi-history")])],1),a("v-list-tile-title",[e._v("History")])],1),a("v-list-tile",{attrs:{disabled:""}},[a("v-list-tile-avatar",[a("v-icon",[e._v("mdi-book")])],1),a("v-list-tile-title",[e._v("List Documents")])],1)],1):e._e()],1),e.isEditMode?a("div",[a("v-list-tile",{on:{click:e.doSave}},[a("v-list-tile-avatar",[a("v-icon",[e._v("mdi-cloud-upload")])],1),a("v-list-tile-title",[e._v("Save")])],1),a("v-list-tile",{on:{click:e.doCancel}},[a("v-list-tile-avatar",[a("v-icon",[e._v("mdi-close-circle")])],1),a("v-list-tile-title",[e._v("Cancel")])],1)],1):e._e(),e.isEditMode?e._e():a("div",[a("v-divider"),a("v-list-tile",{on:{click:e.doLogout}},[a("v-list-tile-avatar",[a("v-icon",[e._v("mdi-logout")])],1),a("v-list-tile-title",[e._v("Logout")])],1)],1)],1)],1):e._e()],1)},le=[],ue=function(e){function t(){var e;return Object(r["a"])(this,t),e=Object(l["a"])(this,Object(u["a"])(t).apply(this,arguments)),e.searchTerm="",e}return Object(d["a"])(t,e),Object(c["a"])(t,[{key:"doCancel",value:function(){this.isDocumentPage&&this.isDocumentDirty||this.isTemplatePage&&this.isTemplateDirty?this.$emit("show-dirty",this.searchTerm):this.$store.dispatch("session/cancelEdit")}},{key:"doLogout",value:function(){this.$store.dispatch("cognito/signOut")}},{key:"doSave",value:function(){this.isDocumentPage?this.$store.dispatch("session/saveDocument"):this.isTemplatePage&&this.$store.dispatch("session/saveTemplate")}},{key:"doSearch",value:function(){this.$emit("do-search",this.searchTerm),this.searchTerm=""}},{key:"showUploadMedia",value:function(){this.$emit("show-upload-media"),this.$store.dispatch("media/post",{title:"test",mimeType:"image/jpeg"})}},{key:"gotoTemplate",value:function(){this.$router.push({name:"template",params:{name:this.documentTemplateID}})}},{key:"showLogin",value:function(){this.$emit("show-login")}},{key:"showNewTemplate",value:function(){this.$emit("show-template")}},{key:"showNewDocument",value:function(){this.$emit("show-document")}},{key:"setEditMode",value:function(){this.$store.dispatch("session/setEditMode",!0)}},{key:"isAuthed",get:function(){return this.$store.getters["cognito/isLoggedIn"]}},{key:"isDocumentPage",get:function(){return"document"===this.$store.state.route.name}},{key:"isDocumentDirty",get:function(){return this.$store.getters["session/isDocumentDirty"]}},{key:"isEditMode",get:function(){return this.$store.getters["session/isEditMode"]}},{key:"isSearchPage",get:function(){return"search"===this.$store.state.route.name}},{key:"isTemplateDirty",get:function(){return this.$store.getters["session/isTemplateDirty"]}},{key:"isTemplatePage",get:function(){return"template"===this.$store.state.route.name}},{key:"documentTemplateID",get:function(){return this.$store.state.session.document?this.$store.state.session.document.template:""}}]),t}(f["c"]);ue=m["a"]([f["a"]],ue);var de=ue,me=de,fe=a("132d"),pe=a("8860"),he=a("ba95"),ve=a("c954"),be=a("5d23"),ge=Object(w["a"])(me,ce,le,!1,null,"a30aad94",null),we=ge.exports;j()(ge,{VBtn:C["a"],VDivider:H["a"],VIcon:fe["a"],VList:pe["a"],VListTile:he["a"],VListTileAvatar:ve["a"],VListTileTitle:be["b"],VMenu:O["a"],VSpacer:I["a"],VTextField:S["a"],VToolbar:M["a"],VToolbarTitle:N["a"]});var ye=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{persistent:"",width:"550"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[a("v-card",[a("v-card-title",{staticClass:"title"},[e._v("Create New Template")]),a("v-divider"),a("v-card-text",[a("v-autocomplete",{attrs:{label:"Tempalte",loading:e.loading,items:e.templates,"search-input":e.search,"cache-items":"","hide-details":""},on:{"update:searchInput":function(t){e.search=t},"update:search-input":function(t){e.search=t}},model:{value:e.template,callback:function(t){e.template=t},expression:"template"}}),a("v-text-field",{attrs:{label:"Document Title","hide-details":""},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}}),a("v-textarea",{attrs:{label:"Synopsis","hide-details":"","no-resize":""},model:{value:e.synopsis,callback:function(t){e.synopsis=t},expression:"synopsis"}})],1),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{on:{click:e.doCancel}},[e._v("Cancel")]),a("v-btn",{on:{click:e.doCreate}},[e._v("Create")])],1)],1)],1)},je=[],ke=(a("28a5"),a("2ef0")),Ce=function(e){function t(){var e;return Object(r["a"])(this,t),e=Object(l["a"])(this,Object(u["a"])(t).apply(this,arguments)),e.title="",e.synopsis="",e.template="",e.loading=!1,e.templates=[],e.search=null,e}return Object(d["a"])(t,e),Object(c["a"])(t,[{key:"watchSearch",value:function(e){e&&e!==this.select&&this.querySelections(e)}},{key:"doCancel",value:function(){this.$emit("input",!1)}},{key:"doCreate",value:function(){var e=this;console.log(this.template),this.template&&this.title&&this.synopsis&&this.$store.dispatch("session/newDocument",{title:this.title,template:this.template,synopsis:this.synopsis}).then(function(t){console.log(t),e.$emit("input",!1),e.$router.push({name:"document",params:{title:t.title}}),e.template="",e.title="",e.synopsis=""}).catch(function(){})}},{key:"querySelections",value:function(e){var t=this;this.loading=!0,this.$store.dispatch("template/list",e).then(function(e){t.templates=Object(ke["map"])(e,function(e){return{text:e.name,value:e.$href.split("/").pop()}}),t.loading=!1}).catch(function(){t.loading=!1})}},{key:"isDocumentPage",get:function(){return"document"===this.$store.state.route.name}}]),t}(f["c"]);m["a"]([Object(f["b"])({default:""})],Ce.prototype,"value",void 0),m["a"]([Object(f["d"])("search")],Ce.prototype,"watchSearch",null),Ce=m["a"]([f["a"]],Ce);var xe=Ce,Te=xe,Ee=a("c6a6"),De=a("a844"),_e=Object(w["a"])(Te,ye,je,!1,null,"59714520",null),Oe=_e.exports;j()(_e,{VAutocomplete:Ee["a"],VBtn:C["a"],VCard:x["a"],VCardActions:T["a"],VCardText:T["b"],VCardTitle:G["a"],VDialog:D["a"],VDivider:H["a"],VSpacer:I["a"],VTextField:S["a"],VTextarea:De["a"]});var Ve=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{persistent:"",width:"550"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[a("v-card",[a("v-card-title",{staticClass:"title"},[e._v("Create New Template")]),a("v-divider"),a("v-card-text",[a("div",{staticClass:"body-1"},[e._v('Templates are used to define what information a type a document should hold.Templates should be designed for a specific topic, not a specific document. For example a\ntemplate "Astronaut" for documents about Joseph Acaba, Loren Acton, Mike Adams, etc.')]),a("v-text-field",{attrs:{label:"Template Name"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),a("v-textarea",{attrs:{label:"Description","no-resize":""},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}})],1),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{on:{click:e.doCancel}},[e._v("Cancel")]),a("v-btn",{on:{click:e.doCreate}},[e._v("Create")])],1)],1)],1)},Ie=[],$e=function(e){function t(){var e;return Object(r["a"])(this,t),e=Object(l["a"])(this,Object(u["a"])(t).apply(this,arguments)),e.name="",e.description="",e}return Object(d["a"])(t,e),Object(c["a"])(t,[{key:"doCancel",value:function(){this.$emit("input",!1)}},{key:"doCreate",value:function(){var e=this;this.name&&this.description&&this.$store.dispatch("session/newTemplate",{name:this.name,description:this.description}).then(function(t){e.$router.push({name:"template",params:{name:t["$href"].split("/").pop()}}),e.$emit("input",!1)}).catch(function(){e.$emit("input",!1)})}}]),t}(f["c"]);m["a"]([Object(f["b"])({default:""})],$e.prototype,"value",void 0),$e=m["a"]([f["a"]],$e);var Be=$e,Pe=Be,Ae=Object(w["a"])(Pe,Ve,Ie,!1,null,"a2438538",null),Se=Ae.exports;j()(Ae,{VBtn:C["a"],VCard:x["a"],VCardActions:T["a"],VCardText:T["b"],VCardTitle:G["a"],VDialog:D["a"],VDivider:H["a"],VSpacer:I["a"],VTextField:S["a"],VTextarea:De["a"]});var Me=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{persistent:"",width:"450"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[a("v-card",[a("v-card-title",{staticClass:"title"},[e._v("Upload Media")]),a("v-card-text",[a("v-text-field",{attrs:{label:"Title"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}}),a("UploadButton",{attrs:{fileChangedCallback:e.fileChanged}})],1),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{on:{click:e.doCancel}},[e._v("Cancel")]),a("v-btn",{on:{click:e.doUpload}},[e._v("Upload")])],1)],1)],1)},Ne=[],Fe=a("82e0"),Ue=a.n(Fe),ze=function(e){function t(){var e;return Object(r["a"])(this,t),e=Object(l["a"])(this,Object(u["a"])(t).apply(this,arguments)),e.title="",e.file=null,e.selected="",e.options=["I am the owner of this image and release it under the CC","I am not the owner of this image but it is covered under the CC"],e}return Object(d["a"])(t,e),Object(c["a"])(t,[{key:"doCancel",value:function(){this.$emit("input",!1)}},{key:"doUpload",value:function(){var e=this;this.$store.dispatch("media/getUrl",{title:this.title,mimeType:this.file.type}).then(function(t){var a=new FormData;return a.append(e.file.name,e.file),e.$store.dispatch("media/post",{url:t,content:a})}).then(function(){e.$emit("input",!1)}).catch(function(t){console.log(t),e.$emit("input",!1)})}},{key:"fileChanged",value:function(e){this.file=e}}]),t}(f["c"]);m["a"]([Object(f["b"])({default:""})],ze.prototype,"value",void 0),ze=m["a"]([Object(f["a"])({components:{UploadButton:Ue.a}})],ze);var Le=ze,Re=Le,qe=Object(w["a"])(Re,Me,Ne,!1,null,"d481748a",null),Ye=qe.exports;j()(qe,{VBtn:C["a"],VCard:x["a"],VCardActions:T["a"],VCardText:T["b"],VCardTitle:G["a"],VDialog:D["a"],VDivider:H["a"],VSpacer:I["a"],VTextField:S["a"]});var Ge=function(e){function t(){var e;return Object(r["a"])(this,t),e=Object(l["a"])(this,Object(u["a"])(t).apply(this,arguments)),e.showAuthDialog=!1,e.showDirtyDialog=!1,e.showNewTemplate=!1,e.showNewDocument=!1,e.showUploadMediaDialog=!1,e}return Object(d["a"])(t,e),Object(c["a"])(t,[{key:"doSearch",value:function(e){this.$router.push({name:"search",params:{search:e}})}}]),t}(f["c"]);Ge=m["a"]([Object(f["a"])({components:{AuthDialog:U,DirtyDialog:J,Footer:re,Header:we,NewDocument:Oe,NewTemplate:Se,UploadMedia:Ye}})],Ge);var He=Ge,We=He,Je=(a("5c0b"),a("7496")),Qe=a("a523"),Ze=Object(w["a"])(We,i,o,!1,null,null,null),Ke=Ze.exports;j()(Ze,{VApp:Je["a"],VContainer:Qe["a"]});var Xe=a("8c4f"),et=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{staticClass:"content"},[n("v-layout",{attrs:{"align-center":"","justify-start":"",column:""}},[n("v-flex",[n("v-img",{attrs:{src:a("cf05"),width:"400"}})],1),n("v-flex",{staticClass:"display-3 text-xs-center"},[e._v("Library Access System")])],1)],1)},tt=[],at=function(e){function t(){return Object(r["a"])(this,t),Object(l["a"])(this,Object(u["a"])(t).apply(this,arguments))}return Object(d["a"])(t,e),t}(f["c"]);at=m["a"]([Object(f["a"])({})],at);var nt=at,st=nt,it=a("adda"),ot=Object(w["a"])(st,et,tt,!1,null,null,null),rt=ot.exports;j()(ot,{VContainer:Qe["a"],VFlex:ne["a"],VImg:it["a"],VLayout:ie["a"]});var ct,lt=a("2f62"),ut=a("795b"),dt=a.n(ut),mt=a("bc3a"),ft=a.n(mt),pt={server:"https://api.thingamajig.builders"},ht=!0,vt={get:function(e,t){return new dt.a(function(a,n){ft.a.get("".concat(e.state.server,"/document/").concat(t)).then(function(e){a(e.data)}).catch(function(e){n(new Error(e))})})},post:function(e,t){return new dt.a(function(a,n){ft.a.post("".concat(e.state.server,"/document/"),t).then(function(e){a(e.data)}).catch(function(e){n(new Error(e))})})},put:function(e,t){return new dt.a(function(a,n){ft.a.put(e.state.server+t.$href,t).then(function(e){a(e.data)}).catch(function(e){n(new Error(e))})})},search:function(e,t){return new dt.a(function(a,n){ft.a.get("".concat(e.state.server,"/search?q=").concat(t)).then(function(e){a(e.data)}).catch(function(e){n(new Error(e))})})}},bt={},gt={namespaced:ht,state:pt,actions:vt,mutations:bt},wt={server:"https://api.thingamajig.builders"},yt=!0,jt={getUrl:function(e,t){return new dt.a(function(a,n){ft.a.post(e.state.server+"/media",t).then(function(e){a(e.data)}).catch(function(e){n(new Error(e))})})},post:function(e,t){return new dt.a(function(e,a){console.log("Post: "+t.url),ft.a.post(t.url,t.content).then(function(t){e(t.data)}).catch(function(e){a(new Error(e))})})}},kt={},Ct={namespaced:yt,state:wt,actions:jt,mutations:kt};(function(e){e["VIEW"]="view",e["EDIT"]="edit"})(ct||(ct={}));var xt={mode:ct.VIEW,busy:!1,user:null,templates:null,originalDocument:null,document:null,originalTemplate:null,template:null,searchResults:null},Tt=!0,Et={cancelEdit:function(e){return e.commit("cancelEdit"),e.commit("setEditMode",!1),dt.a.resolve()},loadDocument:function(e,t){return e.commit("setBusy",!0),e.commit("setDocument",null),e.dispatch("document/get",t,{root:!0}).then(function(t){return e.commit("setDocument",t),e.dispatch("loadTemplate",t.template)}).catch(function(){e.commit("setDocument",null)}).finally(function(){e.commit("setBusy",!1)})},loadTemplate:function(e,t){return e.commit("setBusy",!0),e.commit("setTemplate",null),e.dispatch("template/get",t,{root:!0}).then(function(t){e.commit("setTemplate",t)}).catch(function(){e.commit("setTemplate",null)}).finally(function(){e.commit("setBusy",!1)})},saveDocument:function(e){return null===e.state.document?dt.a.reject():(e.commit("setBusy",!0),e.dispatch("document/put",e.state.document,{root:!0}).then(function(t){var a=!1;e.state.document.title!==e.state.originalDocument.title&&(a=!0),e.commit("setDocument",t),e.commit("setEditMode",!1),a&&Nt.push({name:"document",params:{title:e.state.document.title}})}).finally(function(){e.commit("setBusy",!1)}))},saveTemplate:function(e){e.commit("setBusy",!0);var t=Object(ke["cloneDeep"])(e.state.template);return t.attributes&&(t.attributes=Object(ke["map"])(t.attributes,function(e){return delete e.new,e})),t.sections&&(t.sections=Object(ke["map"])(t.sections,function(e){return delete e.new,e})),e.dispatch("template/put",t,{root:!0}).then(function(t){e.commit("setTemplate",t),e.commit("setEditMode",!1)}).finally(function(){e.commit("setBusy",!1)})},newDocument:function(e,t){return e.commit("setBusy",!0),e.dispatch("document/post",t,{root:!0}).finally(function(){e.commit("setBusy",!1)})},newTemplate:function(e,t){return e.commit("setBusy",!0),e.dispatch("template/post",t,{root:!0}).finally(function(){e.commit("setBusy",!1)})},search:function(e,t){return e.commit("setBusy",!0),e.commit("setResults",null),e.dispatch("document/search",t,{root:!0}).then(function(t){e.commit("setResults",t)}).finally(function(){e.commit("setBusy",!1)})},setEditMode:function(e,t){return e.commit("setEditMode",t),dt.a.resolve()}},Dt={cancelEdit:function(e){s["default"].set(e,"document",Object(ke["cloneDeep"])(xt.originalDocument)),s["default"].set(e,"template",Object(ke["cloneDeep"])(xt.originalTemplate))},setBusy:function(e,t){s["default"].set(e,"busy",t)},setDocument:function(e,t){s["default"].set(e,"document",Object(ke["cloneDeep"])(t)),s["default"].set(e,"originalDocument",Object(ke["cloneDeep"])(t))},setDocumentAttribute:function(e,t){e.document.attributes||(e.document.attributes={}),t.value?s["default"].set(e.document.attributes,t.id,t.value):delete e.document.attributes[t.id]},setDocumentSection:function(e,t){e.document.sections||(e.document.sections={}),t.value?e.document.sections[t.id]=t.value:delete e.document.sections[t.id]},setDocumentSynopsis:function(e,t){xt.document.synopsis=t},setDocumentTitle:function(e,t){xt.document.title=t},setEditMode:function(e,t){e.mode=t?ct.EDIT:ct.VIEW},setResults:function(e,t){s["default"].set(e,"searchResults",Object(ke["cloneDeep"])(t))},setTemplate:function(e,t){s["default"].set(e,"template",Object(ke["cloneDeep"])(t)),s["default"].set(e,"originalTemplate",Object(ke["cloneDeep"])(t))},setTemplateAttribute:function(e,t){e.template.attributes||(e.template.attributes=[]);var a=Object(ke["findIndex"])(e.template.attributes,{id:t.id});a>=0?(t.name?s["default"].set(e.template.attributes[a],"name",t.name):s["default"].delete(e.template.attributes[a],"name"),t.deprecated?s["default"].set(e.template.attributes[a],"deprecated",!0):s["default"].delete(e.template.attributes[a],"deprecated"),t.data?s["default"].set(e.template.attributes[a],"data",t.data):s["default"].delete(e.template.attributes[a],"data")):e.template.attributes.unshift(t)},setTemplateSection:function(e,t){e.template.sections||(e.template.sections=[]);var a=Object(ke["findIndex"])(e.template.sections,{id:t.id});a>=0?(t.name?s["default"].set(e.template.sections[a],"name",t.name):s["default"].delete(e.template.sections[a],"name"),t.deprecated?s["default"].set(e.template.sections[a],"deprecated",!0):s["default"].delete(e.template.sections[a],"deprecated"),t.data?s["default"].set(e.template.sections[a],"data",t.data):s["default"].delete(e.template.sections[a],"data")):e.template.sections.unshift(t)},moveTemplateAttribute:function(e,t){var a=t.oldIndex,n=t.newIndex,i=e.template.attributes.slice();i.splice(n<0?i.length+n:n,0,i.splice(a,1)[0]),s["default"].set(e.template,"attributes",i)},moveTemplateSection:function(e,t){var a=t.oldIndex,n=t.newIndex,i=e.template.sections.slice();i.splice(n<0?i.length+n:n,0,i.splice(a,1)[0]),s["default"].set(e.template,"sections",i)}},_t={isEditMode:function(e){return e.mode===ct.EDIT},isDocumentDirty:function(e){return!Object(ke["isEqual"])(e.document,e.originalDocument)},isTemplateDirty:function(e){return!Object(ke["isEqual"])(e.template,e.originalTemplate)}},Ot={namespaced:Tt,state:xt,actions:Et,getters:_t,mutations:Dt},Vt={server:"https://api.thingamajig.builders"},It=!0,$t={get:function(e,t){return new dt.a(function(a,n){ft.a.get("".concat(e.state.server,"/template/").concat(t)).then(function(e){a(e.data)}).catch(function(e){n(new Error(e))})})},list:function(e,t){return new dt.a(function(a,n){ft.a.get("".concat(e.state.server,"/template/?q=").concat(t)).then(function(e){a(e.data)}).catch(function(e){n(new Error(e))})})},post:function(e,t){return new dt.a(function(a,n){ft.a.post("".concat(e.state.server,"/template/"),t).then(function(e){a(e.data)}).catch(function(e){n(new Error(e))})})},put:function(e,t){return new dt.a(function(a,n){ft.a.put(e.state.server+t.$href,t).then(function(e){a(e.data)}).catch(function(e){n(new Error(e))})})}},Bt={},Pt={namespaced:It,state:Vt,actions:$t,mutations:Bt};s["default"].use(lt["a"]);var At={modules:{document:gt,media:Ct,session:Ot,template:Pt}},St=new lt["a"].Store(At);s["default"].use(Xe["a"]);var Mt=new Xe["a"]({routes:[{path:"/",name:"home",component:rt},{path:"/d/:title",name:"document",component:function(){return Promise.all([a.e("document~template"),a.e("document")]).then(a.bind(null,"0742"))}},{path:"/t/:name",name:"template",component:function(){return Promise.all([a.e("document~template"),a.e("template")]).then(a.bind(null,"17eb"))}},{path:"/u/:username",name:"user",component:function(){return Promise.all([a.e("document~template"),a.e("document")]).then(a.bind(null,"0742"))}},{path:"/q/:search",name:"search",component:function(){return a.e("search").then(a.bind(null,"2d3b"))}},{path:"*",redirect:"/"}]});Mt.beforeEach(function(e,t,a){St.dispatch("session/cancelEdit"),a()}),Mt.beforeResolve(function(e,t,a){a()});var Nt=Mt,Ft=a("a020"),Ut=a.n(Ft);Ut()(St,{userPoolId:"us-west-2_4LQyo7ZbR",identityPoolId:"us-west-2:c394e6b9-874f-45d5-8533-85315ff7966e",userPoolWebClientId:"7f7jtqin8djrvnhlfpa75n5ab3",region:"us-west-2"},"cognito"),ft.a.interceptors.request.use(function(e){return St.dispatch("cognito/fetchSession").then(function(){return e.headers.Authorization="Bearer ".concat(St.state.cognito.session.idToken.jwtToken),dt.a.resolve(e)}).catch(function(){return dt.a.resolve(e)})});var zt=a("31bd");Object(zt["sync"])(St,Nt);var Lt=a("bb71");a("da64"),a("5363");s["default"].use(Lt["a"],{iconfont:"mdi"});var Rt=a("53fe"),qt=function(e,t,a){var n=e.data&&e.data.on||e.componentOptions&&e.componentOptions.listeners;n&&n[t]&&n[t].fns(a)};s["default"].directive("sortable",{bind:function(e,t,a){new Rt(e.getElementsByTagName("tbody")[0],{handle:t.arg?".".concat(t.arg):"",onEnd:function(e){var t=e.oldIndex,n=e.newIndex;qt(a,"reorder",{oldIndex:t,newIndex:n})}})}}),s["default"].config.productionTip=!1,new s["default"]({router:Nt,store:St,render:function(e){return e(Ke)}}).$mount("#app")},cf05:function(e,t,a){e.exports=a.p+"img/logo.82b9c7a5.png"}});
//# sourceMappingURL=app.d332bd17.js.map